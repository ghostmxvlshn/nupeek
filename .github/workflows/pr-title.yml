name: pr-title

on:
  pull_request:
    types: [opened, edited, synchronize, reopened]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Validate PR title follows icon + conventional commit format
        env:
          PR_TITLE: ${{ github.event.pull_request.title }}
        run: |
          pattern='^(âœ¨|ğŸ›|ğŸ“|â™»ï¸|âœ…|ğŸ”§|ğŸš€|ğŸ§ª|ğŸ“¦|ğŸ”’|ğŸ§¹|ğŸ’¥) (feat|fix|docs|style|refactor|test|chore|perf|build|ci|revert)(\([a-z0-9._/-]+\))?(!)?: .+'
          if [[ ! "$PR_TITLE" =~ $pattern ]]; then
            echo "Invalid PR title: '$PR_TITLE'"
            echo "Expected: <icon> <type>(optional-scope)!: <description>"
            exit 1
          fi
